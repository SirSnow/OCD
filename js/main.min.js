/*! HTML 2017-08-03 */
function handleFileProgress(){var a=100*loader.progress|"0%";document.getElementById("percent").innerHTML=a+"%"}function handleComplete(){$(".preload").hide(),$(".pageEnter").show(),page1Animation()}function replace(a,b){$("#resultDesc").append(a.replace("%data%",b))}function shareAjax(){$.ajax({type:"get",url:"ajax_getconfig.php",success:function(a){console.log("ajax success:"+a),console.log("ajax success:"+JSON.parse(a).appId),console.log("ajax success:"+JSON.parse(a).timestamp),console.log("ajax success:"+JSON.parse(a).nonceStr),console.log("ajax success:"+JSON.parse(a).signature),wx.config({debug:!1,appId:JSON.parse(a).appId,timestamp:JSON.parse(a).timestamp,nonceStr:JSON.parse(a).nonceStr,signature:JSON.parse(a).signature,jsApiList:["checkJsApi","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo"]})}})}function shareWechat(){var a="http://weixin.assemblemedia.cn/show-case/ocd/",b=a+"img/shareIcon.png",c="你有病你知道吗？",d="特新型手机病毒强迫症一键测试",e=a+"index.html";wx.ready(function(){wx.onMenuShareTimeline({title:d,link:e,imgUrl:b,success:function(){},cancel:function(){}}),wx.onMenuShareAppMessage({title:c,desc:d,link:e,imgUrl:b,type:"",dataUrl:"",success:function(){},cancel:function(){}}),wx.onMenuShareQQ({title:c,desc:d,link:e,imgUrl:b,success:function(){},cancel:function(){}}),wx.onMenuShareWeibo({title:c,desc:d,link:e,imgUrl:b,success:function(){},cancel:function(){}})})}var points=[];window.onload=function(){manifest=[{src:"img/simpfy.ttf",id:"font"},{src:"img/bgm.mp3",id:"bgm"},{src:gif1,id:"grunt1"},{src:gif2,id:"grunt2"},{src:gif3,id:"grunt3"},{src:gif4,id:"grunt4"},{src:gif5,id:"grunt5"},{src:gif6,id:"grunt6"},{src:gif8,id:"grunt9"},{src:gif7,id:"grunt7"},{src:gifc,id:"grunt8"}],loader=new createjs.LoadQueue(!1),loader.setMaxConnections(100),loader.maintainScriptOrder=!0,loader.installPlugin(createjs.Sound),loader.addEventListener("complete",handleComplete),loader.addEventListener("progress",handleFileProgress),loader.loadManifest(manifest)},$(function(){shareAjax(),shareWechat();var a=1;$("#text2").click(function(){$(".pageEnter").hide(),$(".pageStart").show()}),$(".buttonStart").click(function(){$(".pageStart").hide(),$(".page1").show(),$(".hintBox").show(),$(".hintBox").attr("display","inline-block"),pageClick(a),a++}),$(".button").click(function(){pageClick(a),a++}),$(".submit1").click(function(){TDAPP.onEvent("result00"),resultPage()}),$(".submit2").click(function(){TDAPP.onEvent("result30"),resultPage()}),$(".submit3").click(function(){TDAPP.onEvent("result70"),resultPage()}),$(".submit4").click(function(){TDAPP.onEvent("result100"),resultPage()})});var page1Animation=function(){$(".text1").show(),$("#enter").click(function(){$(".pageEnter").hide(),$(".pageStart").show(),$("#bgm")[0].play()}),setTimeout(function(){$(".textAnim").show(),setTimeout(function(){setTimeout(function(){$("#sendButton").attr("src","img/pageStart/sendBtn.gif"),$("#sendButton").click(function(){$(".textAnim").hide(),$("#text3").show(),$(this).remove(),$(".sendBtn").append('<img id="sendButton" src="img/pageStart/sendBtn.png">'),setTimeout(function(){$("#text4").show()},500),setTimeout(function(){$("#text5").show(),setTimeout(function(){$("#text2").show()},1e3)},1e3)})},6e3)},500)},2500)},resultPage=function(){var a=getGrades();$(".page8").hide(),$(".page9").show(),giveGrades(a)},pageClick=function(a){function b(a){console.log("page"+a),$(".page"+a).hide(),$(".page"+(a+1)).show()}$("#yes"+a).click(function(){var b=$(this).attr("data-choice");points.push(b),TDAPP.onEvent("shi"+a)}),$("#no"+a).click(function(){TDAPP.onEvent("fou"+a);var b=$(this).attr("data-choice");points.push(b)}),$(".select").show(),8==a?$(".button"+a).click(function(){$(".button8").hide(),$(".quiz").hide(),$(".hintBox").hide(),setTimeout(showSubmit(),1e3)}):$(".button"+a).click(function(){b(a)}),changeHintTag(a)},showSubmit=function(){var a=getGrades();0===a?($(".submit1").show(),console.log("#submit1")):a>0&&a<=30?($(".submit2").show(),console.log("#submit2")):a>30&&a<=70?($(".submit3").show(),console.log("#submit3")):($(".submit4").show(),console.log("#submit4"))},changeHintTag=function(a){var b=parseInt(a);$(".dotImg").attr("src","img/dotn.png"),$(".dot"+b).attr("src","img/dot.png"),log.a("changeHintTag",b)},giveGrades=function(a){0===a?(log.a("giveGrades 0",a),replace(str_survive,a)):a>0&&a<=30?(log.a("giveGrades light",a),replace(str_light,a)):a>30&&a<=70?(log.a("giveGrades mid",a),replace(str_medium,a)):(log.a("giveGrades heavy",a),replace(str_heavy,a));for(var b="0123456789",c=b.length,d="",e=0;e<3;e++)d+=b.charAt(Math.floor(Math.random()*c));$("#random").text(d);var f,g,h,i=new Date;f=i.getFullYear(),h=parseInt(i.getMonth())+1,g=i.getDate(),$("#date").text(f+"年"+h+"月"+g+"日")},getGrades=function(){var a=0;console.log(points);for(var b=0;b<=7;b++){var c=parseInt(points[b]);a+=c,console.log(c+" "+a)}return console.log("成绩:"+a),a},log={f:function(a){return console.log(a+" is executed.")},v:function(a){return console.log("The target value is "+a)},a:function(a,b){return console.log(a+" is executed & target value is "+b)}};